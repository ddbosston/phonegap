<!DOCTYPE HTML>
<html>
    <head>
        <title>com.PhoneGap.c2dm</title>
    </head>
    <body>

<!--/*
NOTE:
    This demo uses these plugins:
        Cordova Device Plugin: http://plugins.cordova.io/#/package/org.apache.cordova.device
        Cordova Media Plugin: http://plugins.cordova.io/#/package/org.apache.cordova.media

    To add them via the CLI:
        $ cordova plugin add org.apache.cordova.device
        $ cordova plugin add org.apache.cordova.media
*/ -->      
        <!--<script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>-->
        <script type="text/javascript" charset="utf-8" src="jquery_1.5.2.min.js"></script>
        
        <script type="text/javascript">
        
        
             function onDeviceReady() {
                $( "#r_fcm" ).click(function() {
                    alert( "registrar tocken" );
                    /*RegisterWithFCM();*/
                });
                
                $( "#n_fcm" ).click(function() {
                    alert( "obtener notificaciones" );
                    /*GetMessageFromGCM();*/
                });
                 
             }
            
            function RegisterWithFCM() {
                try {
                    if (window.FirebasePlugin == null) {
                        alert("FCMPlugin is null")
                        return;
                    }
                     window.FirebasePlugin.getToken(function (token) {
                        //”token” received from FCM server.
                        //It will get automatically registered in you device.No extra code is needed.
                         alert(token);
                        document.getElementById("txtGCMId").value = token;
                    });
                   }
            catch (e) {
                    alert(e);
                   }

               }



            function GetMessageFromGCM() {
                alert("onNotificationOpen");
                 try {
                    window.FirebasePlugin.onNotificationOpen(function (data) {
                     alert(JSON.stringify(data));
                    });
                } catch (e) {
                    alert(e);
                }
            }



         </script>
		<div id="home">
			<div id="app-status-div">
                            <form>
                                <textarea id="txtFCMId"></textarea>
                                <button id="r_fcm"> registrar FCM</button>
                                <button id="n_fcm"> Recibir notificaciones FCM</button>
                            </form>
			</div>
		</div>
                <div id="mensajes">
                    
                </div>
    </body>
</html>
